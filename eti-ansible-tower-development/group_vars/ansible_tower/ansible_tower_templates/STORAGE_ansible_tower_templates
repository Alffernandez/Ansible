---
# For possible options see https://docs.ansible.com/ansible/latest/collections/awx/awx/job_template_module.html#ansible-collections-awx-awx-job-template-module
ansible_tower_config:
  default:
    job_templates:
      STORAGE_pure_offload_pod:  &template-STORAGE_pure_offload_pod
        description: STORAGE_pure_offload_pod
        inventory: STORAGE_pure_offload_flasharrays
        vault_credential: VAULT_STORAGE_pure
        concurrent_jobs_enabled: False 
        custom_virtualenv: /opt/tower_venvs/STORAGE_pure/
        project: STORAGE_pure_flasharray_offload_pod
        playbook: offload_pod.yml
      STORAGE_pure_list_fa:  &template-STORAGE_pure_list_fa
        description: List hosts connected to arrays
        inventory: STORAGE_pure
        vault_credential: VAULT_STORAGE_pure
        concurrent_jobs_enabled: True 
        project: STORAGE_ansible_pure
        playbook: get_hosts.yml
      STORAGE_pure_list_ra:  &template-STORAGE_pure_list_ra
        description: List remote access status
        inventory: STORAGE_pure
        vault_credential: VAULT_STORAGE_pure
        concurrent_jobs_enabled: True 
        project: STORAGE_ansible_pure
        playbook: get_RA.yml
        survey_enabled: True
        survey_spec:
          name: ''
          description: ''
          survey_enabled: True
          spec:
            - question_name: Select array tier
              question_description: ''
              required: True
              type: multiselect
              new_question: true
              variable: host_filter
              default: "all"
              choices: 
                - all
                - lab
                - dev
                - prd
                - vdi
      STORAGE_pure_set_ra:  &template-STORAGE_pure_set_ra
        description: Sets remote access status
        inventory: STORAGE_pure
        vault_credential: VAULT_STORAGE_pure
        concurrent_jobs_enabled: True 
        project: STORAGE_ansible_pure
        playbook: set_RA.yml
        survey_enabled: True
        survey_spec:
          name: 'test'
          description: ''
          survey_enabled: True
          spec:
            - question_name: Select array tier
              question_description: ''
              required: True
              type: multiselect
              new_question: true
              variable: host_filter
              default: "all"
              choices: 
                - all
                - lab
                - dev
                - prd
                - vdi
      STORAGE_regen_db:  &template-STORAGE_regen_db
        description: List remote access status
        inventory: STORAGE_pure
        concurrent_jobs_enabled: True 
        project: STORAGE_regen_scripts
        credentials:
          - STORAGE_regen_db
        playbook: oracle_regen.yml
        survey_enabled: True
        survey_spec:
          name: 'STORAGE_regen_db'          
          description: ''
          survey_enabled: True
          spec:
            - question_name: Select source database
              question_description: ''
              required: True
              type: multiplechoice
              variable: SOURCE_DB
              default: ''
              new_question: true
              choices: 
                - prdccr01
                - prdccr02
                - prddmh01
                - prddmh02
                - prdebs01
                - prdebs02
                - prdjfa01
                - prdjfa02
                - prdmqb01
                - prdmqb02
                - prdpbr01
                - prdpbr02
                - prdprf01
                - prdprf02
                - prdqcm01
                - prdqcm02
                - prdrms01
                - prdrms02 
            - question_name: Select destination database
              question_description: ''
              required: True
              type: text
              new_question: true
              variable: TARGET_DB
              default: ""              
            - question_name: Execution type 
              question_description: ''
              required: True
              type: multiplechoice
              new_question: true
              variable: EXECTYPE
              default: "dryrun"
              choices: 
                - execute
                - dryrun
            - question_name: Select schedule 
              question_description: ''
              required: True
              type: multiplechoice
              new_question: true
              variable: SNAPCHOICE
              default: "adhoc"
              choices: 
                - 10am
                - adhoc
      
  prd:
    job_templates:
      STORAGE_pure_offload_pod:
        <<: *template-STORAGE_pure_offload_pod  
        notification_templates_error:
          - STORAGE_email                    
        notification_templates_success:
          - STORAGE_email
  dev:
    job_templates:
      STORAGE_pure_offload_pod:
        <<: *template-STORAGE_pure_offload_pod
      # STORAGE_pure_list_fa:
      #   <<: *template-STORAGE_pure_list_fa
      # STORAGE_pure_list_ra:
      #   <<: *template-STORAGE_pure_list_ra
      # STORAGE_pure_set_ra:
      #   <<: *template-STORAGE_pure_set_ra
      # STORAGE_regen_db:
      #   <<: *template-STORAGE_regen_db
#  c_b:
