---
# For possible options see https://docs.ansible.com/ansible/latest/collections/awx/awx/job_template_module.html#ansible-collections-awx-awx-job-template-module
ansible_tower_config:
  default:
    job_templates:
      UNIX_snapshot_maintenance: &template-UNIX_snapshot_maintenance
        description: Deletes UNIX ESX snapshots and Solaris BE's regularly 
        inventory: UNIX_ansible_unix_inventory
        credentials: 
          - MACHINE_z_unixadm_prd
          - VAULT_unix_ansible_vault
        limit: '!zur*:!ansible-vip:!notlive'
        project: UNIX_ansible_unix
        playbook: playbooks/delete_patching_snaps_and_BEs.yml
      UNIX_vm_template_patch: &template-UNIX_vm_template_patch
        description: Patch the vmware template Red Hat_enterprise_8
        inventory: UNIX_ansible_unix_inventory
        credentials: 
          - MACHINE_z_unixadm_prd
          - VAULT_unix_ansible_vault
        limit: 'ansible-vip'
        project: UNIX_ansible_unix
        playbook: playbooks/vm_template_refresh.yml
      UNIX_ovm_spconfig_backup: &template-UNIX_ovm_spconfig_backup
        description: Backup spconfig
        inventory: UNIX_ansible_unix_inventory
        credential: MACHINE_z_unixadm_prd
        project: UNIX_ansible_unix
        playbook: playbooks/ovm_spconfig_backup.yml
      UNIX_Couchbase_upgrade: &template-UNIX_Couchbase_upgrade
        description: Couchbase Upgrade
        inventory: UNIX_ansible_unix_inventory
        credentials: 
          - MACHINE_z_unixadm_prd
          - VAULT_unix_ansible_vault
        ask_limit: True
        project: ETI_ansible_unix_apps
        playbook: playbooks/couchbase_upgrade.yml
      UNIX_SAN_path_check: &template-UNIX_SAN_path_check
        description: Check Unix SAN Disk Paths
        inventory: UNIX_ansible_unix_inventory
        credential: MACHINE_z_unixadm_prd
        limit: 'ovm:sys-a:sys-b'
        project: UNIX_ansible_unix
        playbook: playbooks/unix_phys_path_check.yml
      UNIX_autopatch: &template-UNIX_autopatch
        description: Autopatch manual
        inventory: UNIX_ansible_unix_inventory
        credentials: 
          - MACHINE_z_unixadm_prd
          - VAULT_unix_ansible_vault
        concurrent_jobs_enabled: True 
        extra_vars:
          reboot: True
          awx_limit: ansible-vip
          clustered_group: False
          fix_patch: false
          skip_tooling: false
          SERIAL: 100 
        project: UNIX_ansible_unix
        playbook: playbooks/awx_patch_servers.yml
        become_enabled: True
      UNIX_consistent: &template-UNIX_consistent
        description: Consistent runs for the UNIX playbook 
        inventory: UNIX_ansible_unix_inventory
        ask_limit: True
        job_tags: repos,ssh,rsyslog,pipconf
        credentials: 
          - MACHINE_z_unixadm_prd
          - VAULT_unix_ansible_vault
        concurrent_jobs_enabled: True 
        extra_vars:
          SERIAL: 100
        project: UNIX_ansible_unix
        playbook: unix.yml
        become_enabled: True
      UNIX_check_infra_db: &template-UNIX_check_infra_db
        description: Feeds splunk sdr_unix_db_report dashboard
        inventory: UNIX_ansible_unix_inventory
        credentials:
            - MACHINE_z_unixadm_prd
            - VAULT_unix_ansible_vault
        limit: 'linux:!notlive'
        project: UNIX_ansible_unix
        playbook: playbooks/check_db.yml
        become_enabled: True
      UNIX_reposync: &template-UNIX_reposync
        description: reposync for Red Hat playbooks
        inventory: UNIX_ansible_unix_inventory
        ask_limit: True
        limit: admin
        credentials: 
          - MACHINE_z_unixadm_prd
        concurrent_jobs_enabled: True 
        project: UNIX_ansible_unix
        playbook: playbooks/reposync.yml
        become_enabled: True
      UNIX_appmirror: &template-UNIX_appmirror
        description: App mirror for Ubuntu
        inventory: UNIX_ansible_unix_inventory
        ask_limit: True
        limit: lonpinfadml002
        credentials:
          - MACHINE_z_unixadm_prd
        concurrent_jobs_enabled: True
        project: UNIX_ansible_unix
        playbook: playbooks/ubuntu-aptmirror_lonpinfadml002.yml
        become_enabled: True
      UNIX_unix_local_scripts: &template-UNIX_local_scripts
        description: UNIX local scripts
        ask_limit: True
        limit: poc 
        credentials: 
          - MACHINE_z_unixadm_prd
          - VAULT_unix_ansible_vault
        playbook: local-scripts.yml
      UNIX_autopatch_clusters: &template-UNIX_autopatch_clusters
        description: Autopatch manual
        inventory: UNIX_ansible_unix_inventory
        credentials: 
          - MACHINE_z_unixadm_prd
          - VAULT_unix_ansible_vault
        concurrent_jobs_enabled: True 
        extra_vars:
          reboot: True
          awx_limit: ansible-vip
          clustered_group: True
          SERIAL: 1
        project: UNIX_ansible_unix
        playbook: playbooks/awx_patch_servers.yml
        become_enabled: True
      UNIX_autopatch_manual: &template-UNIX_autopatch_manual
        description: Autopatch manual
        concurrent_jobs_enabled: True 
        credentials:
          - MACHINE_z_unixadm_prd
          - VAULT_unix_ansible_vault
        ask_extra_vars: True
        extra_vars:
          reboot: True
          clustered_group: False
          SERIAL: 20
        ask_limit: True 
        playbook: playbooks/awx_patch_servers.yml
        become_enabled: True
      UNIX_autopatch_manual_cluster:  &template-UNIX_autopatch_manual_cluster
        description: Autopatch Cluster manual
        inventory: UNIX_ansible_unix_inventory
        credentials: 
          - MACHINE_z_unixadm_prd
          - VAULT_unix_ansible_vault
        concurrent_jobs_enabled: True 
        ask_extra_vars: True
        extra_vars:
          autopatch: True
          reboot: True
          fix_patch: false
          skip_tooling: false
          clustered_group: True
          SERIAL: 1
        ask_limit: True 
        project: UNIX_ansible_unix
        playbook: playbooks/awx_patch_servers.yml
        become_enabled: True
      UNIX_ansible_tower_patching: &UNIX_ansible_tower_patching
        description: Patching Ansible Tower clusters
        inventory: UNIX_ansible_unix_inventory
        credentials: 
          - MACHINE_z_unixadm_prd
          - VAULT_unix_ansible_vault
        project: UNIX_ansible_unix
        playbook: playbooks/ansible_tower_patching.yml
        concurrent_jobs_enabled: True         
        survey_enabled: True 
        ask_extra_vars: True         
  prd:
    job_templates:
      UNIX_ansible_tower_patching:
        <<: *UNIX_ansible_tower_patching
        extra_vars:  
          tower_host: tower.schroders.com
          ansible_tower_group: ansible_tower_dev
      UNIX_autopatch_manual:
        <<: *template-UNIX_autopatch_manual
        project: UNIX_ansible_unix
        inventory: UNIX_ansible_unix_inventory
      UNIX_autopatch_manual_cluster:
        <<: *template-UNIX_autopatch_manual_cluster
      UNIX_unix_local_scripts:
        <<: *template-UNIX_local_scripts
        inventory: UNIX_ansible_unix_inventory
        project: UNIX_unix_local_scripts
      UNIX_SAN_path_check:
        <<: *template-UNIX_SAN_path_check
      UNIX_Couchbase_upgrade:
        <<: *template-UNIX_Couchbase_upgrade
      UNIX_autopatch:
        <<: *template-UNIX_autopatch
        notification_templates_error:
          - UNIX_OPS_email
      UNIX_autopatch_clusters:
        <<: *template-UNIX_autopatch_clusters
        notification_templates_error:
          - UNIX_OPS_email
      UNIX_consistent:
        <<: *template-UNIX_consistent
        notification_templates_error:
          - UNIX_OPS_email        
      UNIX_reposync:
        <<: *template-UNIX_reposync
        notification_templates_error:
          - UNIX_OPS_email            
      UNIX_appmirror:
        <<: *template-UNIX_appmirror
        notification_templates_error:
          - UNIX_OPS_email
      UNIX_snapshot_maintenance:
        <<: *template-UNIX_snapshot_maintenance        
        notification_templates_error:
          - UNIX_OPS_email            
      UNIX_vm_template_patch:
        <<: *template-UNIX_vm_template_patch
        notification_templates_error:
          - UNIX_OPS_email            
      UNIX_ovm_spconfig_backup:
        <<: *template-UNIX_ovm_spconfig_backup
        notification_templates_error:
          - UNIX_OPS_email
      UNIX_check_infra_db:
        <<: *template-UNIX_check_infra_db
  dev:
    job_templates:
      UNIX_ansible_tower_patching:
        <<: *UNIX_ansible_tower_patching
        extra_vars:  
          tower_host: tower-dev.schroders.com
          ansible_tower_group: ansible_tower_prd
      UNIX_autopatch_manual:
        <<: *template-UNIX_autopatch_manual
        project: UNIX_ansible_unix
        inventory: UNIX_ansible_unix_inventory
      UNIX_unix_local_scripts:
        <<: *template-UNIX_local_scripts
        inventory: UNIX_ansible_unix_inventory
        project: UNIX_unix_local_scripts
      UNIX_Couchbase_upgrade:
        <<: *template-UNIX_Couchbase_upgrade
      UNIX_autopatch_manual_cluster:
        <<: *template-UNIX_autopatch_manual_cluster
      UNIX_SAN_path_check:
        <<: *template-UNIX_SAN_path_check
      UNIX_autopatch:
        <<: *template-UNIX_autopatch
      UNIX_snapshot_maintenance:
        <<: *template-UNIX_snapshot_maintenance
        notification_templates_error:
          - UNIX_INC_LOW_QA
        notification_templates_success:
          - UNIX_INC_LOW_QA
      UNIX_vm_template_patch:
        <<: *template-UNIX_vm_template_patch
      UNIX_ovm_spconfig_backup:
        <<: *template-UNIX_ovm_spconfig_backup
      UNIX_consistent:
        <<: *template-UNIX_consistent
      UNIX_reposync:
        <<: *template-UNIX_reposync
      UNIX_appmirror:
        <<: *template-UNIX_appmirror
      UNIX_autopatch_clusters:
        <<: *template-UNIX_autopatch_clusters
      UNIX_check_infra_db:
        <<: *template-UNIX_check_infra_db
#  c_b:
